{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\itsme\\\\OneDrive\\\\Desktop\\\\app\\\\Camera-app-react\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const videoRef = useRef(null);\n  const photoRef = useRef(null);\n  const [hasPhoto, setHasPhoto] = useState(false);\n  const [stream, setStream] = useState(null);\n  const getVideo = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const camera = devices.find(device => device.kind === 'videoinput');\n      if (!camera) {\n        throw new Error('No camera found');\n      }\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: camera.deviceId\n        },\n        audio: false\n      });\n      setStream(mediaStream);\n      let video = videoRef.current;\n      video.srcObject = mediaStream;\n      video.play();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const takePhoto = () => {\n    const width = 400;\n    const height = width / (16 / 9);\n    let video = videoRef.current;\n    let photo = photoRef.current;\n    photo.width = width;\n    photo.height = height;\n    let ctx = photo.getContext('2d');\n    ctx.drawImage(video, 0, 0, width, height);\n    setHasPhoto(true);\n  };\n  const closePhoto = () => {\n    let photo = photoRef.current;\n    let ctx = photo.getContext('2d');\n    ctx.clearRect(0, 0, photo.width, photo.height);\n    setHasPhoto(false);\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n  };\n  useEffect(() => {\n    getVideo();\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Camera\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: takePhoto,\n        children: \"SNAP!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'result' + (hasPhoto ? ' hasPhoto' : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: photoRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closePhoto,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"c1JbTol8oyskqtDMRejVpfADySw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useEffect","useState","App","videoRef","photoRef","hasPhoto","setHasPhoto","stream","setStream","getVideo","devices","navigator","mediaDevices","enumerateDevices","camera","find","device","kind","Error","mediaStream","getUserMedia","video","deviceId","audio","current","srcObject","play","err","console","error","takePhoto","width","height","photo","ctx","getContext","drawImage","closePhoto","clearRect","getTracks","forEach","track","stop"],"sources":["C:/Users/itsme/OneDrive/Desktop/app/Camera-app-react/src/App.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\n\nfunction App() {\n  const videoRef = useRef(null);\n  const photoRef = useRef(null);\n  const [hasPhoto, setHasPhoto] = useState(false);\n  const [stream, setStream] = useState(null);\n\n  const getVideo = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const camera = devices.find(device => device.kind === 'videoinput');\n      \n      if (!camera) {\n        throw new Error('No camera found');\n      }\n      \n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: { deviceId: camera.deviceId },\n        audio: false\n      });\n      \n      setStream(mediaStream);\n      let video = videoRef.current;\n      video.srcObject = mediaStream;\n      video.play();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const takePhoto = () => {\n    const width = 400;\n    const height = width / (16/9);\n    let video = videoRef.current;\n    let photo = photoRef.current;\n    photo.width = width;\n    photo.height = height;\n    let ctx = photo.getContext('2d');\n    ctx.drawImage(video, 0, 0, width, height);\n    setHasPhoto(true);\n  };\n\n  const closePhoto = () => {\n    let photo = photoRef.current;\n    let ctx = photo.getContext('2d');\n    ctx.clearRect(0, 0, photo.width, photo.height);\n    setHasPhoto(false);\n    \n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n  };\n\n  useEffect(() => {\n    getVideo();\n\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n    \n  return (\n    <div className=\"App\">\n      <div className=\"Camera\">\n        <video ref={videoRef} />\n        <button onClick={takePhoto}>SNAP!</button>\n      </div>\n      <div className={'result' + (hasPhoto ? ' hasPhoto' : '')}>\n        <canvas ref={photoRef} />\n        <button onClick={closePhoto}>Close</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}